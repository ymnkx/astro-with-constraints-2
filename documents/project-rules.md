# Project Rules

## 概要

このプロジェクトは Astro を基盤としたデザインシステム・フロントエンド開発プロジェクトです。
一貫性のある品質とメンテナンス性を保つため、以下のルールに従って開発を行います。

## 1. プロジェクト構成・ディレクトリルール

### 1.1 基本構成

- `/src/` - ソースコード
- `/documents/` - プロジェクト関連ドキュメント
- `/tokens/` - デザイントークン定義
- `/scripts/` - Node.js用スクリプト
- `/public/` - 静的ファイル

### 1.2 ディレクトリ命名規則

- ディレクトリ名はPascalCaseを使用
- 略語は使用しない（例：`img` → `image`）
- 複数形を使用する場合は明確な理由がある場合のみ

## 2. コンポーネント開発ルール

### 2.1 ファイル構成

- 1つのコンポーネントは以下3ファイルで構成
  - `ComponentName.astro` - テンプレート
  - `ComponentName.scss` - スタイル
  - `ComponentName.ts` - TypeScript（必要に応じて）

### 2.2 コンポーネント配置

- 同一ディレクトリ内に全ファイルを配置
- ディレクトリ名とファイル名は一致させる

### 2.3 Astroファイルルール

- `<style>` と `<script>` タグは含めない
- 外部ファイルとして分離し、importはnode.jsにより自動で処理される

## 3. CSS・SCSS設計ルール

### 3.1 命名規則（BEM準拠）

- **Block**: 2ワードを `-` で繋ぐ（例：`button-primary`）
- **Element**: 1ワードで記述、blockの後に `_` で繋ぐ（例：`button-primary_text`）
- **Modifier**: `-` から始まるスネークケース（例：`-is-active`）
- キャメルケースは1ワードとして扱う（例：`buttonGroup`）

### 3.2 技術的制約

- `px` 単位は禁止、SCSSのrem functionを使用
- `border-width` のみ `px` 使用を許可
- `margin` と `padding` は論理プロパティを使用
- Astroファイル内にstyleは記述しない

## 4. デザイントークンルール

### 4.1 データ管理

- マスターデータは `/tokens/` 内のJSONファイルで管理
- 3種類のトークン分類
  - `figma/` - Figma variablesから変換
  - `other/` - 実装で追加したトークン
  - `composite/` - 複数値を組み合わせた複合トークン

### 4.2 変換・ビルド

- Style Dictionaryを使用してSCSS変換
- `npm run style-dictionary` でビルド実行
- デザイントークン → CSSカスタムプロパティ
- 複合トークン → SCSSのmixin

## 5. TypeScript・JavaScript ルール

### 5.1 基本方針

- TypeScriptを優先使用
- 型定義は明示的に行う
- `any` 型の使用は原則禁止

### 5.2 ファイル構成

- `/src/scripts/` - 共通スクリプト
- コンポーネント固有の処理は各コンポーネントディレクトリ内

## 6. アセット管理ルール

### 6.1 画像

- WebP形式を優先
- `/public/assets/image/` に配置
- ファイル名は分かりやすい命名

### 6.2 アイコン

- SVGスプライト方式を採用
- `/src/icons/` にSVGファイルを配置
- IconコンポーネントでSVGスプライトを参照

## 7. コミット・バージョン管理ルール

### 7.1 ブランチ戦略

- `main` - 本番環境
- `develop` - 開発環境
- `feature/*` - 機能開発
- `hotfix/*` - 緊急修正

### 7.2 コミットメッセージ

- プリフィックスを使用
  - `feat:` - 新機能
  - `fix:` - バグ修正
  - `docs:` - ドキュメント更新
  - `style:` - スタイル修正
  - `refactor:` - リファクタリング

## 8. ビルド・デプロイルール

### 8.1 ビルド環境

- `dist/` - テスト用ビルド
- `build/` - 納品用ビルド

### 8.2 必須チェック項目

- TypeScriptエラーなし
- SCSSコンパイルエラーなし
- デザイントークンビルド成功
- リンター警告なし

## 9. コードレビュールール

### 9.1 必須レビュー項目

- コンポーネント設計の妥当性
- CSS命名規則準拠
- デザイントークン使用状況
- TypeScript型定義の適切性
- パフォーマンス影響の確認

### 9.2 レビュー体制

- すべてのPull Requestに対してレビュー必須
- 機能追加時はドキュメント更新も必須

## 10. その他のルール

### 10.1 ドキュメント管理

- 機能追加・変更時は関連ドキュメントも更新
- `/documents/` 内のドキュメントは最新状態を維持

### 10.2 禁止事項

- 直接 `main` ブランチへのpush
- 未テストコードのマージ
- ハードコーディングされた値の使用（デザイントークンを使用）
- 日本語ファイル名・ディレクトリ名

---

**注意**: このルールは叩き台です。プロジェクトの進行に応じて適宜更新・追加を行ってください。
